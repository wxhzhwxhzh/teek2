import{_ as i,c as a,o as n,aN as t}from"./chunks/framework.0ZSa6Wd7.js";const o=JSON.parse('{"title":"sync_playwright","description":"","frontmatter":{"id":"intro5","permalink":"/pw/intro5","title":"sync_playwright"},"headers":[],"relativePath":"pw/6.sync_playwright.md","filePath":"pw/6.sync_playwright.md"}'),h={name:"pw/6.sync_playwright.md"};function l(p,s,e,k,r,d){return n(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="python-ä¸­-sync-playwright-ä½¿ç”¨è¯¦è§£" tabindex="-1">Python ä¸­ <code>sync_playwright</code> ä½¿ç”¨è¯¦è§£ <a class="header-anchor" href="#python-ä¸­-sync-playwright-ä½¿ç”¨è¯¦è§£" aria-label="Permalink to &quot;Python ä¸­ \`sync_playwright\` ä½¿ç”¨è¯¦è§£&quot;">â€‹</a></h1><p><code>sync_playwright</code> æ˜¯ <a href="https://playwright.dev/python/" target="_blank" rel="noreferrer">Playwright</a> æä¾›çš„åŒæ­¥ API æ¥å£ï¼Œ<br> å®ƒå…è®¸æˆ‘ä»¬ä»¥åŒæ­¥çš„æ–¹å¼ç¼–å†™æµè§ˆå™¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œè€Œä¸ç”¨å¤„ç†å¼‚æ­¥ <code>async/await</code> è¯­æ³•ï¼Œ<br> éå¸¸é€‚åˆå¿«é€Ÿä¸Šæ‰‹å’Œç¼–å†™è„šæœ¬ã€‚</p><hr><h2 id="_1-å®‰è£…-playwright" tabindex="-1">1. å®‰è£… Playwright <a class="header-anchor" href="#_1-å®‰è£…-playwright" aria-label="Permalink to &quot;1. å®‰è£… Playwright&quot;">â€‹</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> playwright</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®‰è£…æµè§ˆå™¨é©±åŠ¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">playwright</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><hr><h2 id="_2-å¼•å…¥-sync-playwright" tabindex="-1">2. å¼•å…¥ <code>sync_playwright</code> <a class="header-anchor" href="#_2-å¼•å…¥-sync-playwright" aria-label="Permalink to &quot;2. å¼•å…¥ \`sync_playwright\`&quot;">â€‹</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> playwright.sync_api </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sync_playwright</span></span></code></pre></div><blockquote><p><code>sync_playwright</code> æ˜¯ Playwright çš„å…¥å£ï¼Œ<br> éœ€è¦é€šè¿‡ <code>with</code> ä¸Šä¸‹æ–‡æ¥å¯åŠ¨å’Œå…³é—­ Playwrightã€‚</p></blockquote><hr><h2 id="_3-åŸºæœ¬ä½¿ç”¨" tabindex="-1">3. åŸºæœ¬ä½¿ç”¨ <a class="header-anchor" href="#_3-åŸºæœ¬ä½¿ç”¨" aria-label="Permalink to &quot;3. åŸºæœ¬ä½¿ç”¨&quot;">â€‹</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> playwright.sync_api </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sync_playwright</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sync_playwright() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å¯åŠ¨æµè§ˆå™¨ (chromium / firefox / webkit)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    browser </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p.chromium.launch(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">headless</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    page </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> browser.new_page()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ‰“å¼€ç½‘é¡µ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    page.goto(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # è·å–é¡µé¢æ ‡é¢˜</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(page.title())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æˆªå›¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    page.screenshot(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;example.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å…³é—­æµè§ˆå™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    browser.close()</span></span></code></pre></div><hr><h2 id="_4-æµè§ˆå™¨æ“ä½œ" tabindex="-1">4. æµè§ˆå™¨æ“ä½œ <a class="header-anchor" href="#_4-æµè§ˆå™¨æ“ä½œ" aria-label="Permalink to &quot;4. æµè§ˆå™¨æ“ä½œ&quot;">â€‹</a></h2><h3 id="_4-1-å¯åŠ¨æµè§ˆå™¨" tabindex="-1">4.1 å¯åŠ¨æµè§ˆå™¨ <a class="header-anchor" href="#_4-1-å¯åŠ¨æµè§ˆå™¨" aria-label="Permalink to &quot;4.1 å¯åŠ¨æµè§ˆå™¨&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ— å¤´æ¨¡å¼ (é»˜è®¤ True)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">browser </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p.chromium.launch(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">headless</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ˜¾ç¤ºæµè§ˆå™¨çª—å£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">browser </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p.chromium.launch(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">headless</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è°ƒè¯•æ¨¡å¼ (slow_mo æ¯æ­¥æ“ä½œå»¶è¿Ÿ 500ms)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">browser </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p.chromium.launch(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">headless</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">slow_mo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŒ‡å®šç”¨æˆ·æ•°æ®ç›®å½•ï¼ˆä¿å­˜ç™»å½•çŠ¶æ€ç­‰ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">browser </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p.chromium.launch_persistent_context(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    user_data_dir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userdata&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    headless</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><hr><h3 id="_4-2-æ–°å»ºé¡µé¢" tabindex="-1">4.2 æ–°å»ºé¡µé¢ <a class="header-anchor" href="#_4-2-æ–°å»ºé¡µé¢" aria-label="Permalink to &quot;4.2 æ–°å»ºé¡µé¢&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">context </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> browser.new_context()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">page </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context.new_page()</span></span></code></pre></div><p>ä¸€ä¸ª <strong>Browser</strong> å¯ä»¥åŒ…å«å¤šä¸ª <strong>Context</strong>ï¼Œæ¯ä¸ª <strong>Context</strong> å°±åƒä¸€ä¸ªç‹¬ç«‹çš„æµè§ˆå™¨å®ä¾‹ï¼Œäº’ä¸å¹²æ‰°ã€‚</p><hr><h2 id="_5-é¡µé¢å¸¸ç”¨æ“ä½œ" tabindex="-1">5. é¡µé¢å¸¸ç”¨æ“ä½œ <a class="header-anchor" href="#_5-é¡µé¢å¸¸ç”¨æ“ä½œ" aria-label="Permalink to &quot;5. é¡µé¢å¸¸ç”¨æ“ä½œ&quot;">â€‹</a></h2><h3 id="_5-1-æ‰“å¼€é¡µé¢" tabindex="-1">5.1 æ‰“å¼€é¡µé¢ <a class="header-anchor" href="#_5-1-æ‰“å¼€é¡µé¢" aria-label="Permalink to &quot;5.1 æ‰“å¼€é¡µé¢&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">page.goto(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://www.baidu.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="_5-2-è¾“å…¥å†…å®¹" tabindex="-1">5.2 è¾“å…¥å†…å®¹ <a class="header-anchor" href="#_5-2-è¾“å…¥å†…å®¹" aria-label="Permalink to &quot;5.2 è¾“å…¥å†…å®¹&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">page.fill(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input[name=&#39;wd&#39;]&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Playwright Python&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="_5-3-ç‚¹å‡»æŒ‰é’®" tabindex="-1">5.3 ç‚¹å‡»æŒ‰é’® <a class="header-anchor" href="#_5-3-ç‚¹å‡»æŒ‰é’®" aria-label="Permalink to &quot;5.3 ç‚¹å‡»æŒ‰é’®&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">page.click(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input[type=&#39;submit&#39;]&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="_5-4-è·å–å…ƒç´ æ–‡æœ¬" tabindex="-1">5.4 è·å–å…ƒç´ æ–‡æœ¬ <a class="header-anchor" href="#_5-4-è·å–å…ƒç´ æ–‡æœ¬" aria-label="Permalink to &quot;5.4 è·å–å…ƒç´ æ–‡æœ¬&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">text </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> page.inner_text(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;h1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(text)</span></span></code></pre></div><h3 id="_5-5-è·å–å±æ€§" tabindex="-1">5.5 è·å–å±æ€§ <a class="header-anchor" href="#_5-5-è·å–å±æ€§" aria-label="Permalink to &quot;5.5 è·å–å±æ€§&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">href </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> page.get_attribute(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;href&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(href)</span></span></code></pre></div><h3 id="_5-6-ç­‰å¾…å…ƒç´ åŠ è½½" tabindex="-1">5.6 ç­‰å¾…å…ƒç´ åŠ è½½ <a class="header-anchor" href="#_5-6-ç­‰å¾…å…ƒç´ åŠ è½½" aria-label="Permalink to &quot;5.6 ç­‰å¾…å…ƒç´ åŠ è½½&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">page.wait_for_selector(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#result&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><hr><h2 id="_6-é¡µé¢æˆªå›¾ä¸-pdf" tabindex="-1">6. é¡µé¢æˆªå›¾ä¸ PDF <a class="header-anchor" href="#_6-é¡µé¢æˆªå›¾ä¸-pdf" aria-label="Permalink to &quot;6. é¡µé¢æˆªå›¾ä¸ PDF&quot;">â€‹</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æˆªå›¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">page.screenshot(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;page.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">full_page</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯¼å‡º PDF (ä»…æ”¯æŒ Chromium)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">page.pdf(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;page.pdf&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">format</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;A4&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><hr><h2 id="_7-æ‰§è¡Œ-javascript" tabindex="-1">7. æ‰§è¡Œ JavaScript <a class="header-anchor" href="#_7-æ‰§è¡Œ-javascript" aria-label="Permalink to &quot;7. æ‰§è¡Œ JavaScript&quot;">â€‹</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> page.evaluate(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;() =&gt; document.title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result)</span></span></code></pre></div><p>å¯ä»¥ä¼ å‚ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> page.evaluate(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;(x, y) =&gt; x + y&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 12</span></span></code></pre></div><hr><h2 id="_8-å¤„ç†å¼¹çª—-dialog" tabindex="-1">8. å¤„ç†å¼¹çª— (Dialog) <a class="header-anchor" href="#_8-å¤„ç†å¼¹çª—-dialog" aria-label="Permalink to &quot;8. å¤„ç†å¼¹çª— (Dialog)&quot;">â€‹</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handle_dialog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dialog):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dialog.message)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    dialog.accept()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dialog&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, handle_dialog)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">page.click(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#alertButton&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><hr><h2 id="_9-ç½‘ç»œè¯·æ±‚æ‹¦æˆªä¸ä¿®æ”¹" tabindex="-1">9. ç½‘ç»œè¯·æ±‚æ‹¦æˆªä¸ä¿®æ”¹ <a class="header-anchor" href="#_9-ç½‘ç»œè¯·æ±‚æ‹¦æˆªä¸ä¿®æ”¹" aria-label="Permalink to &quot;9. ç½‘ç»œè¯·æ±‚æ‹¦æˆªä¸ä¿®æ”¹&quot;">â€‹</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handle_route</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(route, request):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;api&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> request.url:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ‹¦æˆªåˆ°è¯·æ±‚:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, request.url)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        route.abort()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        route.continue_()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">page.route(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;**/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, handle_route)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">page.goto(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><hr><h2 id="_10-æ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½" tabindex="-1">10. æ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½ <a class="header-anchor" href="#_10-æ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½" aria-label="Permalink to &quot;10. æ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½&quot;">â€‹</a></h2><h3 id="ä¸Šä¼ æ–‡ä»¶" tabindex="-1">ä¸Šä¼ æ–‡ä»¶ <a class="header-anchor" href="#ä¸Šä¼ æ–‡ä»¶" aria-label="Permalink to &quot;ä¸Šä¼ æ–‡ä»¶&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">page.set_input_files(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input[type=&#39;file&#39;]&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;example.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="æ–‡ä»¶ä¸‹è½½" tabindex="-1">æ–‡ä»¶ä¸‹è½½ <a class="header-anchor" href="#æ–‡ä»¶ä¸‹è½½" aria-label="Permalink to &quot;æ–‡ä»¶ä¸‹è½½&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> page.expect_download() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> download_info:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    page.click(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a#download&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">download </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> download_info.value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">download.save_as(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;downloaded_file.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><hr><h2 id="_11-è‡ªåŠ¨ç­‰å¾…æœºåˆ¶" tabindex="-1">11. è‡ªåŠ¨ç­‰å¾…æœºåˆ¶ <a class="header-anchor" href="#_11-è‡ªåŠ¨ç­‰å¾…æœºåˆ¶" aria-label="Permalink to &quot;11. è‡ªåŠ¨ç­‰å¾…æœºåˆ¶&quot;">â€‹</a></h2><p>Playwright å†…ç½®æ™ºèƒ½ç­‰å¾…ï¼Œä¸éœ€è¦é¢‘ç¹ <code>sleep</code>ã€‚<br> å¸¸è§ç­‰å¾…æ–¹æ³•ï¼š</p><ul><li><code>page.wait_for_selector(&quot;css&quot;)</code></li><li><code>page.wait_for_timeout(2000)</code> # å¼ºåˆ¶ç­‰å¾… 2 ç§’</li><li><code>page.wait_for_load_state(&quot;networkidle&quot;)</code></li></ul><hr><h2 id="_12-ç¤ºä¾‹-ç™¾åº¦æœç´¢å¹¶æˆªå›¾" tabindex="-1">12. ç¤ºä¾‹ï¼šç™¾åº¦æœç´¢å¹¶æˆªå›¾ <a class="header-anchor" href="#_12-ç¤ºä¾‹-ç™¾åº¦æœç´¢å¹¶æˆªå›¾" aria-label="Permalink to &quot;12. ç¤ºä¾‹ï¼šç™¾åº¦æœç´¢å¹¶æˆªå›¾&quot;">â€‹</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> playwright.sync_api </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sync_playwright</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sync_playwright() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    browser </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p.chromium.launch(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">headless</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    page </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> browser.new_page()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    page.goto(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://www.baidu.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    page.fill(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input[name=&#39;wd&#39;]&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Playwright Python&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    page.press(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input[name=&#39;wd&#39;]&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Enter&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    page.wait_for_selector(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#content_left&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    page.screenshot(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;baidu_result.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">full_page</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    browser.close()</span></span></code></pre></div><hr><h2 id="_13-æ€»ç»“" tabindex="-1">13. æ€»ç»“ <a class="header-anchor" href="#_13-æ€»ç»“" aria-label="Permalink to &quot;13. æ€»ç»“&quot;">â€‹</a></h2><ul><li><code>sync_playwright</code> é€‚åˆå¿«é€Ÿç¼–å†™åŒæ­¥è„šæœ¬ï¼Œç®€å•æ˜“ç”¨ã€‚</li><li>æä¾›äº†å¼ºå¤§çš„ <strong>é¡µé¢æ“ä½œ API</strong>ï¼ŒåŒ…æ‹¬å…ƒç´ äº¤äº’ã€æˆªå›¾ã€PDFã€ä¸‹è½½ã€ä¸Šä¼ ç­‰ã€‚</li><li>å†…ç½® <strong>æ™ºèƒ½ç­‰å¾…æœºåˆ¶</strong>ï¼Œå¤§å¤§å‡å°‘æ‰‹åŠ¨ <code>sleep</code> çš„éœ€è¦ã€‚</li><li>å¯ç”¨äº <strong>çˆ¬è™«ã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€é€†å‘åˆ†æ</strong> ç­‰åœºæ™¯ã€‚</li></ul><hr><p>ğŸ“Œ <strong>å®˜æ–¹æ–‡æ¡£</strong>: <a href="https://playwright.dev/python/docs/intro" target="_blank" rel="noreferrer">Playwright for Python</a></p>`,66)])])}const g=i(h,[["render",l]]);export{o as __pageData,g as default};
