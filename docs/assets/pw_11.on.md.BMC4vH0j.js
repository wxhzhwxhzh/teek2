import{_ as i,c as a,o as t,aN as n}from"./chunks/framework.0ZSa6Wd7.js";const o=JSON.parse('{"title":"🔵 page.on()","description":"","frontmatter":{"id":"intro11","permalink":"/pw/intro11","title":"🔵 page.on()"},"headers":[],"relativePath":"pw/11.on.md","filePath":"pw/11.on.md"}'),h={name:"pw/11.on.md"};function e(l,s,p,k,r,d){return t(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="🔵-page-on" tabindex="-1">🔵 page.on() <a class="header-anchor" href="#🔵-page-on" aria-label="Permalink to &quot;🔵 page.on()&quot;">​</a></h1><hr><h2 id="playwright-page-的事件-v1-52-可能支持的" tabindex="-1">Playwright Page 的事件（v1.52 可能支持的） <a class="header-anchor" href="#playwright-page-的事件-v1-52-可能支持的" aria-label="Permalink to &quot;Playwright Page 的事件（v1.52 可能支持的）&quot;">​</a></h2><p>以下是 <code>page.on(...)</code> 通常能监听的一些事件：</p><table tabindex="0"><thead><tr><th>事件名</th><th>事件参数类型 / 回调收到的对象</th><th>触发时机 / 说明</th></tr></thead><tbody><tr><td><code>close</code></td><td><code>Page</code></td><td>当页面被关闭时触发 (<a href="https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com" title="Page | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>console</code></td><td><code>ConsoleMessage</code></td><td>当页面内部有 <code>console.log</code> / <code>console.error</code> / <code>console.warn</code> 等被调用时触发 (<a href="https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com" title="Page | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>crash</code></td><td>—</td><td>页面进程崩溃（crash）时触发 (<a href="https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com" title="Page | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>dialog</code></td><td><code>Dialog</code></td><td>当页面弹出对话框（<code>alert</code> / <code>prompt</code> / <code>confirm</code> / <code>beforeunload</code>）时触发 (<a href="https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com" title="Page | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>filechooser</code></td><td><code>FileChooser</code></td><td>当页面尝试使用文件上传（例如点击 <code>&lt;input type=&quot;file&quot;&gt;</code>）时触发 (<a href="https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com" title="Page | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>frameattached</code></td><td><code>Frame</code></td><td>当某个子 frame 被附加（插入）到页面中时触发 (<a href="https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com" title="Page | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>framedetached</code></td><td><code>Frame</code></td><td>当某个子 frame 从页面中移除时触发 (<a href="https://playwright.bootcss.com/python/docs/api/class-page?utm_source=chatgpt.com" title="Page - Playwright" target="_blank" rel="noreferrer">Playwright 中文网</a>)</td></tr><tr><td><code>framenavigated</code></td><td><code>Frame</code></td><td>当已有的 frame 导航到新的 URL（或重载）时触发 (<a href="https://playwright.bootcss.com/python/docs/api/class-page?utm_source=chatgpt.com" title="Page - Playwright" target="_blank" rel="noreferrer">Playwright 中文网</a>)</td></tr><tr><td><code>load</code></td><td>—</td><td>当浏览器触发 <code>window.load</code> 事件（所有资源加载完成）时触发 (<a href="https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com" title="Page | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>domcontentloaded</code></td><td>—</td><td>当 DOMContentLoaded 事件触发时（文档基本结构解析完成）触发 (<a href="https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com" title="Page | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>pageerror</code></td><td>错误对象 / JavaScript 异常</td><td>当页面内部 JavaScript 抛出未捕获异常时触发 (<a href="https://playwright.bootcss.com/python/docs/api/class-page?utm_source=chatgpt.com" title="Page - Playwright" target="_blank" rel="noreferrer">Playwright 中文网</a>)</td></tr><tr><td><code>popup</code></td><td><code>Page</code></td><td>当页面打开新的子页面 / 弹出窗口（<code>window.open</code> 等）时触发 (<a href="https://playwright.bootcss.com/python/docs/api/class-page?utm_source=chatgpt.com" title="Page - Playwright" target="_blank" rel="noreferrer">Playwright 中文网</a>)</td></tr><tr><td><code>request</code></td><td><code>Request</code></td><td>当页面发起网络请求时触发 (<a href="https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com" title="Page | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>response</code></td><td><code>Response</code></td><td>当某个请求收到响应头 / 状态时触发 (<a href="https://playwright.dev/python/docs/api/class-request?utm_source=chatgpt.com" title="Request | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>requestfinished</code></td><td><code>Request</code></td><td>当请求完成（包括响应体下载完毕）时触发 (<a href="https://playwright.dev/python/docs/api/class-request?utm_source=chatgpt.com" title="Request | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>requestfailed</code></td><td><code>Request</code></td><td>当请求在中间某环节失败（网络错误、超时等）时触发 (<a href="https://playwright.dev/python/docs/api/class-request?utm_source=chatgpt.com" title="Request | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>websocket</code></td><td><code>WebSocket</code></td><td>当页面发起 WebSocket 请求 / 连接时触发（如果页面使用 WebSocket） (<a href="https://playwright.bootcss.com/python/docs/api/class-page?utm_source=chatgpt.com" title="Page - Playwright" target="_blank" rel="noreferrer">Playwright 中文网</a>)</td></tr><tr><td><code>worker</code></td><td><code>Worker</code></td><td>当页面创建新的专用 Web Worker （Dedicated Worker）时触发 (<a href="https://playwright.bootcss.com/python/docs/api/class-page?utm_source=chatgpt.com" title="Page - Playwright" target="_blank" rel="noreferrer">Playwright 中文网</a>)</td></tr></tbody></table><blockquote><p>✅ 注意：这些是 <code>Page</code> 对象常见支持的事件，不排除某些事件在 1.52 版本中尚未引入或已做兼容性变动。建议在你安装的版本上通过 <code>help(Page)</code> 或阅读对应版本文档确认。</p></blockquote><hr><h2 id="每个事件的示例代码" tabindex="-1">每个事件的示例代码 <a class="header-anchor" href="#每个事件的示例代码" aria-label="Permalink to &quot;每个事件的示例代码&quot;">​</a></h2><p>下面是这些事件的使用示例（以同步 API 为例，异步 API 用法类似但加 <code>await</code>）：</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> playwright.sync_api </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sync_playwright</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> demo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sync_playwright() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        browser </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p.chromium.launch(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">headless</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        context </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> browser.new_context(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">accept_downloads</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 对于 download 事件可能需要 accept_downloads=True</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context.new_page()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # close</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;close&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pg: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;页面被关闭&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # console</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> on_console</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Console: type=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">msg.type</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">, text=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">msg.text</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;console&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, on_console)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # crash</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;crash&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;页面崩溃&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # dialog</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> on_dialog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dialog):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Dialog: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dialog.message</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            dialog.accept()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 或 dismiss()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dialog&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, on_dialog)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # filechooser</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;filechooser&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fc: fc.set_files([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/path/to/file.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # frameattached / framedetached / framenavigated</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;frameattached&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fr: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;frame 附加:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fr.url))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;framedetached&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fr: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;frame 分离:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fr.url))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;framenavigated&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fr: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;frame 导航至:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fr.url))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # load &amp; domcontentloaded</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;load&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;页面完全加载(load)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;domcontentloaded&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DOMContentLoaded 触发&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # pageerror</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pageerror&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;页面 JS 错误:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, err))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # popup</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;popup&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> new_page: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;弹出窗口打开:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, new_page.url))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 请求 / 响应 / 完成 / 失败</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;request&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;发起请求:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, req.method, req.url))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;response&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> resp: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;收到响应:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, resp.status, resp.url))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;requestfinished&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;请求完成:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, req.url))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;requestfailed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;请求失败:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, req.url, req.failure))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # websocket</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;websocket&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ws: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;WebSocket 打开:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ws.url))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # worker</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;worker&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> w: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Worker 启动:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, w.url))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 访问一个测试页面</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.goto(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 为演示，触发一个 popup</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.evaluate(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;window.open(&#39;https://example.org&#39;, &#39;_blank&#39;)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 等待一段时间以便观察输出</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.wait_for_timeout(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        browser.close()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __name__</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;__main__&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    demo()</span></span></code></pre></div><p>在异步版（<code>async_playwright</code>）中，你可以把 <code>page.on(...)</code> 放在 <code>await context.new_page()</code> 之后，用 <code>async</code> 回调或普通函数都可以（Playwright 会自动处理回调是协程还是普通函数）。</p><hr>`,12)])])}const g=i(h,[["render",e]]);export{o as __pageData,g as default};
