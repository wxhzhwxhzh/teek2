import{_ as i,c as a,o as t,aN as n}from"./chunks/framework.0ZSa6Wd7.js";const o=JSON.parse('{"title":"ğŸ”µ page.on()","description":"","frontmatter":{"id":"intro11","permalink":"/pw/intro11","title":"ğŸ”µ page.on()"},"headers":[],"relativePath":"pw/11.on.md","filePath":"pw/11.on.md"}'),h={name:"pw/11.on.md"};function e(l,s,p,k,r,d){return t(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="ğŸ”µ-page-on" tabindex="-1">ğŸ”µ page.on() <a class="header-anchor" href="#ğŸ”µ-page-on" aria-label="Permalink to &quot;ğŸ”µ page.on()&quot;">â€‹</a></h1><hr><h2 id="playwright-page-çš„äº‹ä»¶-v1-52-å¯èƒ½æ”¯æŒçš„" tabindex="-1">Playwright Page çš„äº‹ä»¶ï¼ˆv1.52 å¯èƒ½æ”¯æŒçš„ï¼‰ <a class="header-anchor" href="#playwright-page-çš„äº‹ä»¶-v1-52-å¯èƒ½æ”¯æŒçš„" aria-label="Permalink to &quot;Playwright Page çš„äº‹ä»¶ï¼ˆv1.52 å¯èƒ½æ”¯æŒçš„ï¼‰&quot;">â€‹</a></h2><p>ä»¥ä¸‹æ˜¯ <code>page.on(...)</code> é€šå¸¸èƒ½ç›‘å¬çš„ä¸€äº›äº‹ä»¶ï¼š</p><table tabindex="0"><thead><tr><th>äº‹ä»¶å</th><th>äº‹ä»¶å‚æ•°ç±»å‹ / å›è°ƒæ”¶åˆ°çš„å¯¹è±¡</th><th>è§¦å‘æ—¶æœº / è¯´æ˜</th></tr></thead><tbody><tr><td><code>close</code></td><td><code>Page</code></td><td>å½“é¡µé¢è¢«å…³é—­æ—¶è§¦å‘ (<a href="https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com" title="Page | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>console</code></td><td><code>ConsoleMessage</code></td><td>å½“é¡µé¢å†…éƒ¨æœ‰ <code>console.log</code> / <code>console.error</code> / <code>console.warn</code> ç­‰è¢«è°ƒç”¨æ—¶è§¦å‘ (<a href="https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com" title="Page | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>crash</code></td><td>â€”</td><td>é¡µé¢è¿›ç¨‹å´©æºƒï¼ˆcrashï¼‰æ—¶è§¦å‘ (<a href="https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com" title="Page | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>dialog</code></td><td><code>Dialog</code></td><td>å½“é¡µé¢å¼¹å‡ºå¯¹è¯æ¡†ï¼ˆ<code>alert</code> / <code>prompt</code> / <code>confirm</code> / <code>beforeunload</code>ï¼‰æ—¶è§¦å‘ (<a href="https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com" title="Page | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>filechooser</code></td><td><code>FileChooser</code></td><td>å½“é¡µé¢å°è¯•ä½¿ç”¨æ–‡ä»¶ä¸Šä¼ ï¼ˆä¾‹å¦‚ç‚¹å‡» <code>&lt;input type=&quot;file&quot;&gt;</code>ï¼‰æ—¶è§¦å‘ (<a href="https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com" title="Page | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>frameattached</code></td><td><code>Frame</code></td><td>å½“æŸä¸ªå­ frame è¢«é™„åŠ ï¼ˆæ’å…¥ï¼‰åˆ°é¡µé¢ä¸­æ—¶è§¦å‘ (<a href="https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com" title="Page | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>framedetached</code></td><td><code>Frame</code></td><td>å½“æŸä¸ªå­ frame ä»é¡µé¢ä¸­ç§»é™¤æ—¶è§¦å‘ (<a href="https://playwright.bootcss.com/python/docs/api/class-page?utm_source=chatgpt.com" title="Page - Playwright" target="_blank" rel="noreferrer">Playwright ä¸­æ–‡ç½‘</a>)</td></tr><tr><td><code>framenavigated</code></td><td><code>Frame</code></td><td>å½“å·²æœ‰çš„ frame å¯¼èˆªåˆ°æ–°çš„ URLï¼ˆæˆ–é‡è½½ï¼‰æ—¶è§¦å‘ (<a href="https://playwright.bootcss.com/python/docs/api/class-page?utm_source=chatgpt.com" title="Page - Playwright" target="_blank" rel="noreferrer">Playwright ä¸­æ–‡ç½‘</a>)</td></tr><tr><td><code>load</code></td><td>â€”</td><td>å½“æµè§ˆå™¨è§¦å‘ <code>window.load</code> äº‹ä»¶ï¼ˆæ‰€æœ‰èµ„æºåŠ è½½å®Œæˆï¼‰æ—¶è§¦å‘ (<a href="https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com" title="Page | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>domcontentloaded</code></td><td>â€”</td><td>å½“ DOMContentLoaded äº‹ä»¶è§¦å‘æ—¶ï¼ˆæ–‡æ¡£åŸºæœ¬ç»“æ„è§£æå®Œæˆï¼‰è§¦å‘ (<a href="https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com" title="Page | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>pageerror</code></td><td>é”™è¯¯å¯¹è±¡ / JavaScript å¼‚å¸¸</td><td>å½“é¡µé¢å†…éƒ¨ JavaScript æŠ›å‡ºæœªæ•è·å¼‚å¸¸æ—¶è§¦å‘ (<a href="https://playwright.bootcss.com/python/docs/api/class-page?utm_source=chatgpt.com" title="Page - Playwright" target="_blank" rel="noreferrer">Playwright ä¸­æ–‡ç½‘</a>)</td></tr><tr><td><code>popup</code></td><td><code>Page</code></td><td>å½“é¡µé¢æ‰“å¼€æ–°çš„å­é¡µé¢ / å¼¹å‡ºçª—å£ï¼ˆ<code>window.open</code> ç­‰ï¼‰æ—¶è§¦å‘ (<a href="https://playwright.bootcss.com/python/docs/api/class-page?utm_source=chatgpt.com" title="Page - Playwright" target="_blank" rel="noreferrer">Playwright ä¸­æ–‡ç½‘</a>)</td></tr><tr><td><code>request</code></td><td><code>Request</code></td><td>å½“é¡µé¢å‘èµ·ç½‘ç»œè¯·æ±‚æ—¶è§¦å‘ (<a href="https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com" title="Page | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>response</code></td><td><code>Response</code></td><td>å½“æŸä¸ªè¯·æ±‚æ”¶åˆ°å“åº”å¤´ / çŠ¶æ€æ—¶è§¦å‘ (<a href="https://playwright.dev/python/docs/api/class-request?utm_source=chatgpt.com" title="Request | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>requestfinished</code></td><td><code>Request</code></td><td>å½“è¯·æ±‚å®Œæˆï¼ˆåŒ…æ‹¬å“åº”ä½“ä¸‹è½½å®Œæ¯•ï¼‰æ—¶è§¦å‘ (<a href="https://playwright.dev/python/docs/api/class-request?utm_source=chatgpt.com" title="Request | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>requestfailed</code></td><td><code>Request</code></td><td>å½“è¯·æ±‚åœ¨ä¸­é—´æŸç¯èŠ‚å¤±è´¥ï¼ˆç½‘ç»œé”™è¯¯ã€è¶…æ—¶ç­‰ï¼‰æ—¶è§¦å‘ (<a href="https://playwright.dev/python/docs/api/class-request?utm_source=chatgpt.com" title="Request | Playwright Python" target="_blank" rel="noreferrer">Playwright</a>)</td></tr><tr><td><code>websocket</code></td><td><code>WebSocket</code></td><td>å½“é¡µé¢å‘èµ· WebSocket è¯·æ±‚ / è¿æ¥æ—¶è§¦å‘ï¼ˆå¦‚æœé¡µé¢ä½¿ç”¨ WebSocketï¼‰ (<a href="https://playwright.bootcss.com/python/docs/api/class-page?utm_source=chatgpt.com" title="Page - Playwright" target="_blank" rel="noreferrer">Playwright ä¸­æ–‡ç½‘</a>)</td></tr><tr><td><code>worker</code></td><td><code>Worker</code></td><td>å½“é¡µé¢åˆ›å»ºæ–°çš„ä¸“ç”¨ Web Worker ï¼ˆDedicated Workerï¼‰æ—¶è§¦å‘ (<a href="https://playwright.bootcss.com/python/docs/api/class-page?utm_source=chatgpt.com" title="Page - Playwright" target="_blank" rel="noreferrer">Playwright ä¸­æ–‡ç½‘</a>)</td></tr></tbody></table><blockquote><p>âœ… æ³¨æ„ï¼šè¿™äº›æ˜¯ <code>Page</code> å¯¹è±¡å¸¸è§æ”¯æŒçš„äº‹ä»¶ï¼Œä¸æ’é™¤æŸäº›äº‹ä»¶åœ¨ 1.52 ç‰ˆæœ¬ä¸­å°šæœªå¼•å…¥æˆ–å·²åšå…¼å®¹æ€§å˜åŠ¨ã€‚å»ºè®®åœ¨ä½ å®‰è£…çš„ç‰ˆæœ¬ä¸Šé€šè¿‡ <code>help(Page)</code> æˆ–é˜…è¯»å¯¹åº”ç‰ˆæœ¬æ–‡æ¡£ç¡®è®¤ã€‚</p></blockquote><hr><h2 id="æ¯ä¸ªäº‹ä»¶çš„ç¤ºä¾‹ä»£ç " tabindex="-1">æ¯ä¸ªäº‹ä»¶çš„ç¤ºä¾‹ä»£ç  <a class="header-anchor" href="#æ¯ä¸ªäº‹ä»¶çš„ç¤ºä¾‹ä»£ç " aria-label="Permalink to &quot;æ¯ä¸ªäº‹ä»¶çš„ç¤ºä¾‹ä»£ç &quot;">â€‹</a></h2><p>ä¸‹é¢æ˜¯è¿™äº›äº‹ä»¶çš„ä½¿ç”¨ç¤ºä¾‹ï¼ˆä»¥åŒæ­¥ API ä¸ºä¾‹ï¼Œå¼‚æ­¥ API ç”¨æ³•ç±»ä¼¼ä½†åŠ  <code>await</code>ï¼‰ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> playwright.sync_api </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sync_playwright</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> demo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sync_playwright() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        browser </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p.chromium.launch(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">headless</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        context </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> browser.new_context(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">accept_downloads</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯¹äº download äº‹ä»¶å¯èƒ½éœ€è¦ accept_downloads=True</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context.new_page()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # close</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;close&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pg: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é¡µé¢è¢«å…³é—­&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # console</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> on_console</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Console: type=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">msg.type</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">, text=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">msg.text</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;console&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, on_console)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # crash</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;crash&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é¡µé¢å´©æºƒ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # dialog</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> on_dialog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dialog):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Dialog: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dialog.message</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            dialog.accept()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æˆ– dismiss()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dialog&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, on_dialog)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # filechooser</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;filechooser&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fc: fc.set_files([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/path/to/file.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # frameattached / framedetached / framenavigated</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;frameattached&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fr: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;frame é™„åŠ :&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fr.url))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;framedetached&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fr: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;frame åˆ†ç¦»:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fr.url))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;framenavigated&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fr: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;frame å¯¼èˆªè‡³:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fr.url))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # load &amp; domcontentloaded</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;load&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é¡µé¢å®Œå…¨åŠ è½½(load)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;domcontentloaded&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DOMContentLoaded è§¦å‘&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # pageerror</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pageerror&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é¡µé¢ JS é”™è¯¯:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, err))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # popup</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;popup&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> new_page: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¼¹å‡ºçª—å£æ‰“å¼€:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, new_page.url))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # è¯·æ±‚ / å“åº” / å®Œæˆ / å¤±è´¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;request&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å‘èµ·è¯·æ±‚:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, req.method, req.url))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;response&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> resp: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ”¶åˆ°å“åº”:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, resp.status, resp.url))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;requestfinished&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¯·æ±‚å®Œæˆ:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, req.url))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;requestfailed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¯·æ±‚å¤±è´¥:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, req.url, req.failure))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # websocket</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;websocket&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ws: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;WebSocket æ‰“å¼€:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ws.url))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # worker</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.on(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;worker&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> w: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Worker å¯åŠ¨:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, w.url))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # è®¿é—®ä¸€ä¸ªæµ‹è¯•é¡µé¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.goto(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # ä¸ºæ¼”ç¤ºï¼Œè§¦å‘ä¸€ä¸ª popup</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.evaluate(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;window.open(&#39;https://example.org&#39;, &#39;_blank&#39;)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # ç­‰å¾…ä¸€æ®µæ—¶é—´ä»¥ä¾¿è§‚å¯Ÿè¾“å‡º</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page.wait_for_timeout(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        browser.close()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __name__</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;__main__&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    demo()</span></span></code></pre></div><p>åœ¨å¼‚æ­¥ç‰ˆï¼ˆ<code>async_playwright</code>ï¼‰ä¸­ï¼Œä½ å¯ä»¥æŠŠ <code>page.on(...)</code> æ”¾åœ¨ <code>await context.new_page()</code> ä¹‹åï¼Œç”¨ <code>async</code> å›è°ƒæˆ–æ™®é€šå‡½æ•°éƒ½å¯ä»¥ï¼ˆPlaywright ä¼šè‡ªåŠ¨å¤„ç†å›è°ƒæ˜¯åç¨‹è¿˜æ˜¯æ™®é€šå‡½æ•°ï¼‰ã€‚</p><hr>`,12)])])}const g=i(h,[["render",e]]);export{o as __pageData,g as default};
